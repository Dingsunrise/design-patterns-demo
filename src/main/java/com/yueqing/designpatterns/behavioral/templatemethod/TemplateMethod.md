#  模板方法模式

## 一 简介

意图
> 模板方法模式在一个方法中定义一个算法骨架，并将某些步骤推迟到子类中实现。模板方法模式可以让子类在不改变算法整体结构的情况下，重新定义算法中
> 的某些步骤。

这里的“算法”，我们可以理解为广义上的“业务逻辑”，并不特指数据结构和算法中的“算法”。这里的算法骨架就是“模板”，包含算法骨架的方法就是“模板方法”，
这也是模板方法模式名字的由来。

## 二 适用场景

1. 当你只希望客户端扩展某个特定算法步骤， 而不是整个算法或其结构时， 可使用模板方法模式。模板方法将整个算法转换为一系列独立的步骤， 以便子类能
   对其进行扩展， 同时还可让超类中所定义的结构保持完整。
2. 当多个类的算法除一些细微不同之外几乎完全一样时， 你可使用该模式。 但其后果就是， 只要算法发生变化， 你就可能需要修改所有的类。

模板模式有两大作用：复用和扩展。其中，复用指的是，所有的子类可以复用父类中提供的模板方法的代码，如java的inputStream,AbstractList类。
扩展指的是，框架通过模板模式提供功能扩展点，让框架用户可以在不修改框架源码的情况下，基于扩展点定制化框架的功能，如Java Servlet，JUnit TestCase等。

## 三 实现方式
1 创建抽象基类并声明一个模板方法和代表算法步骤的一系列抽象方法。 在模板方法中根据算法结构依次调用相应步骤。 可用 final最终修饰模板方法以防止
  子类对其进行重写。

2 可对部分算法方法加上默认实现，这样可以给部分步骤带来好处， 因为子类无需实现那些方法。

3 在算法的关键步骤之间添加钩子，从而灵活控制步骤的执行。

## 四 优缺点
模板方法模式只需要客户端写一个大型算法中的特定部分， 算法交给子类去实现比较灵活，子类算法部分的修改或算法的扩展都不会对父类逻辑有太多影响。
也可将重复代码提取到一个超类中。但是模板方法模式会受到算法框架的限制，而且模板方法中的步骤越多， 其维护工作就可能会越困难。

## 五 注意事项

模板方法最好使用final修饰，避免被重写，模板方法中的需要子类实现的步骤最好不要过多，不然维护麻烦。

## 六 应用场景
模版方法模式在 Java 框架中很常见。 开发者通常使用它来向框架用户提供通过继承实现的、 对标准功能进行扩展的简单方式。
这里是一些核心 Java 程序库中模版方法的示例：
java.io.InputStream、 java.io.OutputStream、 java.io.Reader 和 java.io.Writer 的所有非抽象方法。
java.util.AbstractList、 java.util.AbstractSet 和 java.util.AbstractMap 的所有非抽象方法。
javax.servlet.http.HttpServlet， 所有默认发送 HTTP 405 “方法不允许” 错误响应的 doXXX()方法。 你可随时对其进行重写。

**识别方法**： 模版方法可以通过行为方法来识别， 该方法已有一个在基类中定义的 “默认” 行为。

### 七 与其他模式关系

**工厂方法模式**
工厂方法模式是模板方法模式的一种特殊形式。 同时， 工厂方法可以作为一个大型模板方法中的一个步骤。

**策略模式**
模板方法基于继承机制： 它允许你通过扩展子类中的部分内容来改变部分算法。 策略模式基于组合机制： 你可以通过对相应行为提供不同的策略来改变对象的
部分行为。 模板方法在类层次上运作， 因此它是静态的。 策略在对象层次上运作， 因此允许在运行时切换行为。