# 工厂方法模式

## 一 简介

工厂方法模式一般为：
>定一个创建对象的接口，由子类决定实例化具体的类，将对象的创建延迟的子类中。


## 二 适用场景
需要对一些对象的创建做一下封装，且这些对象的创建逻辑比较复杂的时候，我们就考虑使用工厂模式，封装对象的创建过程，将对象的创建和使用相分离。
比如配置的解析，或者需要组合各种其他对象进行初始化操作等等。相反，如果创建逻辑比较简单，建议直接使用简单工厂模式。

## 三 实现方式

工厂方法的实现比较简单，定一个创建对象的接口，然后针对每种类型，创建相应的子工厂类。创建对象时，选择不同的工厂来创建不同的实例。

## 四 优缺点

封装变化：创建逻辑有可能变化，封装成工厂类之后，创建逻辑的变更对调用者透明。

代码复用：创建代码抽离到独立的工厂类之后可以复用。

隔离复杂性：封装复杂的创建逻辑，调用者无需了解如何创建对象。

控制复杂度：将创建代码抽离出来，让原本的函数或类职责更单一，代码更简洁。

## 五 注意事项

子工厂类一般不建议建太多，不然也会难以查找和维护，各子工厂也可以共同继承一个抽象父类，将部分重复代码剥离到父类中，以便公用。

## 六 应用场景
常用来设计DI容器，如SpringIOC,Google Guice等等。

## 七 与其他模式关系

**1 抽象工厂模式**
抽象工厂模式通常基于一组工厂方法， 但你也可以使用原型模式来生成这些类的方法。

**2 迭代器**
你可以同时使用工厂方法和迭代器模式来让子类集合返回不同类型的迭代器， 并使得迭代器与集合相匹配。

**3 原型模式**
原型并不基于继承， 因此没有继承的缺点。 另一方面， 原型需要对被复制对象进行复杂的初始化。 工厂方法基于继承， 但是它不需要初始化步骤。

**4 模板方法模式**
工厂方法是模板方法模式的一种特殊形式。 同时， 工厂方法可以作为一个大型模板方法中的一个步骤。